<?xml version="1.0" encoding="UTF-8"?>
<!-- General Guideline Verbs: GET=find, POST=create, PUT=store (create or update), PATCH=update, DELETE=delete  -->

<resource xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/rest-api-2.1.xsd"
          name="oms" displayName="Headless OMS APIs" version="1.0.0" description="Services for OMS">

    <resource name="lookup" description="Lookup from various entities by ID"><method type="get">
        <service name="co.hotwax.GeneralServices.lookup#ById"/></method></resource>

    <resource name="v1">
        <resource name="orders">
            <method type="get"><service name="co.hotwax.v1.OrderServices.find#Orders"/></method>
            <method type="post"><service name="co.hotwax.v1.OrderServices.create#Order"/></method>
            <id name="orderId">
                <method type="get"><service name="co.hotwax.v1.OrderServices.find#Orders"/></method>
                <resource name="orderItem">
                    <method type="post"><service name="co.hotwax.oms.v1.OrderServices.add#OrderItem"/></method>
                    <method type="put"><service name="co.hotwax.oms.v1.OrderServices.update#OrderItem"/></method>
                    <resource name="cancel">
                        <method type="post"><service name="co.hotwax.oms.v1.OrderServices.cancel#OrderItem"/></method>
                    </resource>
                </resource>
            </id>
        </resource>

        <resource name="customers">
            <method type="post"><service name="co.hotwax.v1.CustomerServices.create#Customer"/></method>
            <method type="get"><service name="co.hotwax.v1.CustomerServices.find#Customers"/></method>

            <id name="partyId">
                <method type="get"><service name="co.hotwax.v1.CustomerServices.find#Customers"/></method>
            </id>
        </resource>

        <resource name="products">
            <method type="put"><service name="co.hotwax.v1.ProductServices.store#ProductRestImpl"/></method>
            <method type="get"><service name="co.hotwax.oms.v1.ProductServices.find#Products"/></method>
            <id name="productId">
                <method type="get"><service name="co.hotwax.oms.v1.ProductServices.find#Products"/></method>
            </id>
        </resource>

        <resource name="facilities">
            <method type="post"><service name="co.hotwax.v1.FacilityServices.create#Facility"/></method>
            <method type="get"><service name="co.hotwax.v1.FacilityServices.find#Facilities"/></method>

            <id name="locationId">
                <method type="get"><service name="co.hotwax.v1.FacilityServices.find#Facilities"/></method>
            </id>
        </resource>

        <resource name="inventory">
            <method type="post"><service name="co.hotwax.v1.AssetServices.record#Inventory"/></method>
            <method type="get"><service name="co.hotwax.v1.AssetServices.get#AvailableInventory"/></method>
        </resource>
    </resource>
</resource>
